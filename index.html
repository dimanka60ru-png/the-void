<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VOID TEMPLE | $CLICK</title>
    <link href="https://fonts.googleapis.com" rel="stylesheet">
    <style>
        :root { --bg: #ffffff; --text: #1a1a1a; --accent: #ff3b30; --sec: #999; --eye: -100%; }
        body.dark { --bg: #0f0f0f; --text: #eee; --sec: #444; }
        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }
        body { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: 2s; overflow: hidden; }
        body::after { content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: url(https://upload.wikimedia.org); opacity: 0.04; pointer-events: none; }
        .langs { position: absolute; top: 20px; display: flex; gap: 10px; z-index: 100; }
        .l-btn { font-size: 0.6rem; cursor: pointer; color: var(--sec); text-transform: uppercase; padding: 5px; }
        .l-btn.active { color: var(--accent); font-weight: bold; }
        #chat-wall { position: absolute; top: 15%; width: 100%; pointer-events: none; height: 200px; text-align: center; }
        .m { font-family: 'Playfair Display', serif; font-style: italic; font-size: 1.2rem; opacity: 0; animation: f 6s forwards; margin-bottom: 5px; }
        @keyframes f { 0% { opacity: 0; transform: translateY(20px); } 15% { opacity: 0.8; } 100% { opacity: 0; transform: translateY(-60px); } }
        .main { width: 90%; max-width: 500px; text-align: center; z-index: 10; }
        #q { font-family: 'Playfair Display', serif; font-size: 1.5rem; line-height: 1.5; min-height: 100px; margin-bottom: 50px; opacity: 0; transition: 0.5s; }
        #btn { width: 120px; height: 120px; background: var(--accent); border-radius: 50%; border: none; cursor: pointer; display: flex; justify-content: center; align-items: center; margin: 0 auto; box-shadow: 0 10px 30px rgba(255,0,0,0.2); }
        .eye { width: 26px; height: 14px; background: #eee; border-radius: 50%; position: relative; overflow: hidden; margin: 0 10px; }
        .p { width: 10px; height: 10px; background: #000; border-radius: 50%; position: absolute; top: 2px; left: 8px; }
        .lid { position: absolute; top: var(--eye); left: 0; width: 100%; height: 100%; background: var(--accent); transition: 0.15s; z-index: 2; }
        #in { position: absolute; bottom: 130px; background: none; border: none; border-bottom: 1px solid var(--sec); color: var(--text); text-align: center; width: 220px; padding: 5px; z-index: 50; }
        .ft { position: absolute; bottom: 25px; font-size: 0.7rem; color: var(--sec); text-align: center; width: 100%; }
        #ca { border: 1px solid var(--sec); padding: 5px 15px; border-radius: 20px; cursor: pointer; display: inline-block; margin-top: 10px; }
    </style>
</head>
<body id="b">

<div class="langs">
    <div class="l-btn active" onclick="sL('en')">EN</div>
    <div class="l-btn" onclick="sL('ru')">RU</div>
    <div class="l-btn" onclick="sL('jp')">JP</div>
</div>

<div id="chat-wall"></div>

<div class="main">
    <div id="q" style="opacity:1">...</div>
    <button id="btn">
        <div class="eye"><div class="lid"></div><div class="p"></div></div>
        <div class="eye"><div class="lid"></div><div class="p"></div></div>
    </button>
</div>

<input type="text" id="in" placeholder="whisper something..." maxlength="50" autocomplete="off">

<div class="ft">
    <div id="cnt">your pain: 0</div>
    <div id="ca" onclick="cp()">CA: CZkrVESiJHyjtR39m7a5doaZwSFT5YMpy8pJMretpump</div>
</div>

<script src="https://cdn.pubnub.com"></script>
<script>
    const CA_STR = "CZkrVESiJHyjtR39m7a5doaZwSFT5YMpy8pJMretpump";
    let clks = parseInt(localStorage.getItem('v_clks')) || 0;
    let ln = 'en';
    let a;

    const qs = [
        { en: "God is dead.", ru: "Бог умер.", jp: "神は死んだ。" },
        { en: "Time is a circle.", ru: "Время — это круг.", jp: "時間は円です。" },
        { en: "Void is freedom.", ru: "Пустота — это свобода.", jp: "空虚は自由です。" }
    ];

    // --- SOUND ---
    function initA() {
        if (!a) {
            try {
                a = new (window.AudioContext || window.webkitAudioContext)();
                const o = a.createOscillator(); const g = a.createGain();
                o.type = 'sine'; o.frequency.setValueAtTime(50, a.currentTime);
                g.gain.setValueAtTime(0.01, a.currentTime); o.connect(g); g.connect(a.destination);
                o.start(); console.log("Audio started");
            } catch(e) { console.log("Audio block"); }
        }
    }
    function play() {
        if(a) {
            const o = a.createOscillator(); const g = a.createGain();
            o.type = 'sine'; o.frequency.setValueAtTime(150, a.currentTime);
            g.gain.setValueAtTime(0.1, a.currentTime); g.gain.exponentialRampToValueAtTime(0.01, a.currentTime + 0.1);
            o.connect(g); g.connect(a.destination); o.start(); o.stop(a.currentTime + 0.1);
        }
    }

    // --- CHAT ---
    let pn;
    try {
        pn = new PubNub({ publishKey: 'pub-c-46700c2b-986c-486a-8b83-50069a30456c', subscribeKey: 'sub-c-1349071c-7607-11eb-987a-526466f24419', uuid: "u_"+Math.random() });
        pn.addListener({ message: (m) => {
            const d = document.createElement('div'); d.className = 'm'; d.innerText = m.message;
            document.getElementById('chat-wall').appendChild(d); setTimeout(() => d.remove(), 6000);
        }});
        pn.subscribe({ channels: ['v_ch'] });
    } catch(e) {}

    document.getElementById('in').onkeypress = (e) => {
        if(e.key === 'Enter' && e.target.value.trim() !== '' && pn) {
            pn.publish({ channel: 'v_ch', message: e.target.value }); e.target.value = '';
        }
    };

    // --- CORE ---
    function up() {
        const r = document.documentElement; const t = Math.min(clks / 1000, 1);
        r.style.setProperty('--eye', `${-100 + (t * 100)}%`);
        if (clks > 100) document.body.classList.add('dark');
        document.getElementById('cnt').innerText = (ln === 'ru' ? 'твоя боль: ' : 'your pain: ') + clks;
    }

    const bEl = document.getElementById('btn');
    bEl.onmousedown = () => { initA(); document.querySelectorAll('.lid').forEach(l=>l.style.top='0%'); play(); };
    bEl.onmouseup = () => {
        clks++; localStorage.setItem('v_clks', clks);
        const qE = document.getElementById('q'); qE.style.opacity = 0;
        setTimeout(() => {
            qE.innerText = qs[Math.floor(Math.random()*qs.length)][ln];
            qE.style.opacity = 1; up();
        }, 200);
    };

    document.addEventListener('mousemove', (e) => {
        document.querySelectorAll('.p').forEach(p => {
            const r = p.getBoundingClientRect(); const x = r.left + r.width/2; const y = r.top + r.height/2;
            const ang = Math.atan2(e.clientX - x, e.clientY - y);
            p.style.transform = `rotate(${(ang * (180/Math.PI) * -1) + 180}deg) translateY(-4px)`;
        });
    });

    function sL(l) { ln = l; document.querySelectorAll('.l-btn').forEach(t=>t.classList.toggle('active', t.innerText.toLowerCase()===l)); up(); }
    function cp() { navigator.clipboard.writeText(CA_STR); alert("CA Copied"); }
    
    up();
</script>
</body>
</html>
