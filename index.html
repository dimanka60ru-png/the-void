<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>THE VOID TEMPLE | $CLICK</title>
    <link href="https://fonts.googleapis.com" rel="stylesheet">
    <style>
        :root { --bg: #ffffff; --text: #1a1a1a; --accent: #ff3b30; --secondary: #999; --eye-open: -100%; }
        body.dark { --bg: #0f0f0f; --text: #eee; --secondary: #555; }
        body.abyss { --bg: #000; --text: #ff3b30; --secondary: #700; }
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body { background: var(--bg); color: var(--text); font-family: 'Inter', sans-serif; height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; transition: 2s ease; overflow: hidden; text-align: center; }
        body::after { content: ""; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: url(https://upload.wikimedia.org); opacity: 0.04; pointer-events: none; }
        
        .lang-bar { position: absolute; top: 20px; display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; z-index: 100; padding: 0 10px; }
        .lang-tag { font-size: 0.6rem; letter-spacing: 1px; cursor: pointer; color: var(--secondary); transition: 0.3s; padding: 5px; text-transform: uppercase; }
        .lang-tag.active { color: var(--accent); font-weight: bold; }

        #chat-area { position: absolute; top: 15%; width: 100%; pointer-events: none; height: 150px; overflow: hidden; }
        .msg { font-family: 'Playfair Display', serif; font-style: italic; font-size: 1.1rem; opacity: 0; animation: float 6s forwards; margin-bottom: 8px; position: absolute; left: 0; right: 0; }
        @keyframes float { 0% { opacity: 0; transform: translateY(20px); } 15% { opacity: 0.8; } 85% { opacity: 0.5; } 100% { opacity: 0; transform: translateY(-50px); } }

        .main { width: 90%; max-width: 600px; z-index: 10; }
        #quote { font-family: 'Playfair Display', serif; font-size: 1.4rem; line-height: 1.6; min-height: 100px; margin-bottom: 50px; opacity: 0; transition: 0.5s; }
        #quote.show { opacity: 1; }

        #void-btn { width: 125px; height: 125px; background: var(--accent); border-radius: 50%; border: none; cursor: pointer; box-shadow: 0 10px 40px rgba(255, 30, 30, 0.2); display: flex; justify-content: center; align-items: center; transition: 0.1s; outline: none; }
        #void-btn:active { transform: scale(0.9); }
        .eye { width: 26px; height: 15px; background: #eee; border-radius: 50%; position: relative; overflow: hidden; margin: 0 10px; border: 1px solid rgba(0,0,0,0.05); }
        .pupil { width: 10px; height: 10px; background: #000; border-radius: 50%; position: absolute; top: 2.5px; left: 8px; transition: transform 0.05s linear; }
        .eyelid { position: absolute; top: var(--eye-open); left: 0; width: 100%; height: 100%; background: var(--accent); transition: 0.15s; z-index: 2; }

        #chat-input { position: absolute; bottom: 130px; background: none; border: none; border-bottom: 1px solid var(--secondary); color: var(--text); text-align: center; font-size: 0.85rem; padding: 8px; width: 220px; outline: none; transition: 0.3s; z-index: 50; }
        #chat-input::placeholder { color: var(--secondary); opacity: 0.6; }

        .footer { position: absolute; bottom: 25px; width: 100%; font-size: 0.7rem; color: var(--secondary); letter-spacing: 0.5px; z-index: 10; }
        #ca-box { border: 1px solid var(--secondary); padding: 8px 18px; border-radius: 20px; cursor: pointer; display: inline-block; margin-top: 12px; transition: 0.3s; font-family: monospace; }
        #ca-box:hover { border-color: var(--text); color: var(--text); }
        
        .sound-toggle { position: absolute; bottom: 20px; right: 20px; font-size: 0.8rem; cursor: pointer; opacity: 0.4; }
    </style>
</head>
<body id="b">

<div class="lang-bar">
    <span class="lang-tag active" onclick="sL('en')">EN</span><span class="lang-tag" onclick="sL('ru')">RU</span><span class="lang-tag" onclick="sL('zh')">ZH</span><span class="lang-tag" onclick="sL('ko')">KO</span><span class="lang-tag" onclick="sL('jp')">JP</span>
    <span class="lang-tag" onclick="sL('es')">ES</span><span class="lang-tag" onclick="sL('pt')">PT</span><span class="lang-tag" onclick="sL('tr')">TR</span><span class="lang-tag" onclick="sL('vi')">VI</span><span class="lang-tag" onclick="sL('ar')">AR</span>
</div>

<div id="chat-area"></div>

<div class="main">
    <div id="quote" class="show">Welcome to the Void Temple.</div>
    <div style="display:flex; justify-content:center;">
        <button id="void-btn">
            <div class="eye"><div class="eyelid"></div><div class="pupil"></div></div>
            <div class="eye"><div class="eyelid"></div><div class="pupil"></div></div>
        </button>
    </div>
</div>

<input type="text" id="chat-input" placeholder="прошепчи что-нибудь..." maxlength="50" autocomplete="off">

<div class="footer">
    <div id="p-count">твоя боль: 0</div>
    <div id="g-count">общая пустота: ...</div>
    <div id="ca-box" onclick="copyCA()">CA: CZkrVESiJHyjtR39m7a5doaZwSFT5YMpy8pJMretpump</div>
</div>

<script src="https://cdn.pubnub.com"></script>
<script>
    const ca = "CZkrVESiJHyjtR39m7a5doaZwSFT5YMpy8pJMretpump";
    let pClicks = parseInt(localStorage.getItem('v_c')) || 0;
    let lang = 'ru';
    const goal = 1000;
    let audioStarted = false;

    // ЦИТАТЫ
    const qs = [
        { en: "God is dead. And we have killed him.", ru: "Бог умер: мы его убили.", zh: "上帝已死。是我们杀了他。", ko: "신은 죽었다. 우리가 그를 죽였다.", jp: "神は死んだ。そして私たちが彼を殺した。", es: "Dios ha muerto.", pt: "Deus está morto.", tr: "Tanrı öldü.", vi: "Chúa đã chết.", ar: "مات الإله。" },
        { en: "Time is a flat circle.", ru: "Время — это плоский круг.", zh: "时间是一个扁平的圆圈。", ko: "시간은 평면적인 원이다.", jp: "時間は平らな円です。", es: "El tiempo es un círculo plano.", pt: "O tempo es un círculo plano.", tr: "Zaman düz bir çemberdir.", vi: "Thời gian là một vòng tròn phẳng.", ar: "الوقت دائرة مسطحة。" },
        { en: "Everything is temporary.", ru: "Всё временно.", zh: "一切都是暂时的。", ko: "모든 것은 일시적이다.", jp: "すべては一時的なものです。", es: "Todo es temporal.", pt: "Tudo é temporário.", tr: "Her şey geçicidir.", vi: "Mọi thứ đều là tạm thời.", ar: "كل شيء مؤقت。" },
        { en: "The abyss is watching.", ru: "Бездна наблюдает.", zh: "深渊在注视。", ko: "심연이 지켜보고 있다.", jp: "深淵が見つめている。", es: "El abismo está mirando.", pt: "O abismo está observando.", tr: "Uçurum izliyor.", vi: "Vực thẳm đang quan sát.", ar: "الهاوية تراقب。" },
        { en: "Clicking won't save you.", ru: "Клики тебя не спасут.", zh: "点击救不了你。", ko: "클릭은 당신을 구원하지 못할 것입니다.", jp: "クリックはあなたを救いません。", es: "Hacer clic no te salvará.", pt: "Clicar não vai te salvar.", tr: "Tıklamak seni kurtarmayacak.", vi: "Nhấp chuột không cứu được bạn.", ar: "الضغط لن ينقذك。" }
    ];

    const finalIns = { en: "Time is the only thing you can't buy. Stop wasting it.", ru: "Самое ценное, что есть у нас в жизни — это время. Не трать его впустую.", ar: "الوقت هو الشيء الوحيد الذي لا يمكنك شراؤه。" };

    // ЗВУК
    const aCtx = new (window.AudioContext || window.webkitAudioContext)();
    function playClick() {
        if(!audioStarted) { startHum(); audioStarted = true; }
        const o = aCtx.createOscillator(); const g = aCtx.createGain();
        o.type = 'sine'; o.frequency.setValueAtTime(100, aCtx.currentTime);
        g.gain.setValueAtTime(0.1, aCtx.currentTime); g.gain.exponentialRampToValueAtTime(0.01, aCtx.currentTime + 0.1);
        o.connect(g); g.connect(aCtx.destination); o.start(); o.stop(aCtx.currentTime + 0.1);
    }
    function startHum() {
        const o = aCtx.createOscillator(); const g = aCtx.createGain();
        o.type = 'sine'; o.frequency.setValueAtTime(50, aCtx.currentTime);
        g.gain.setValueAtTime(0.02, aCtx.currentTime); o.connect(g); g.connect(aCtx.destination);
        o.start();
    }

    // ЧАТ
    const pn = new PubNub({ publishKey: 'pub-c-46700c2b-986c-486a-8b83-50069a30456c', subscribeKey: 'sub-c-1349071c-7607-11eb-987a-526466f24419', uuid: "u_"+Math.random() });
    pn.addListener({ message: (m) => {
        const d = document.createElement('div'); d.className = 'msg'; d.innerText = m.message;
        document.getElementById('chat-area').appendChild(d); setTimeout(() => d.remove(), 6000);
    }});
    pn.subscribe({ channels: ['void_v1'] });

    document.getElementById('chat-input').onkeypress = (e) => {
        if(e.key === 'Enter' && e.target.value.trim() !== '') {
            pn.publish({ channel: 'void_v1', message: e.target.value }); e.target.value = '';
        }
    };

    // ГЛОБАЛЬНЫЙ СЧЕТЧИК
    async function uG() {
        try {
            const r = await fetch(`https://api.countapi.xyz`);
            const d = await r.json(); document.getElementById('g-count').innerText = (lang === 'ru' ? 'общая пустота: ' : 'global void: ') + d.value.toLocaleString();
        } catch(e) { document.getElementById('g-count').innerText = "..."; }
    }
    async function hG() { try { fetch(`https://api.countapi.xyz`); } catch(e){} }

    function updateUI() {
        const r = document.documentElement; const t = Math.min(pClicks / goal, 1);
        r.style.setProperty('--eye-open', `${-100 + (t * 100)}%`);
        if (pClicks > 300) document.body.classList.add('dark');
        if (pClicks >= goal) document.body.classList.add('abyss');
        document.getElementById('p-count').innerText = (lang === 'ru' ? 'твоя боль: ' : 'your pain: ') + pClicks;
    }

    const vBtn = document.getElementById('void-btn');
    vBtn.onmousedown = () => { if(pClicks<goal) { document.querySelectorAll('.eyelid').forEach(l=>l.style.top='0%'); playClick(); } };
    vBtn.onmouseup = () => {
        if(pClicks >= goal) return;
        pClicks++; localStorage.setItem('v_c', pClicks); hG();
        const q = document.getElementById('quote'); q.classList.remove('show');
        setTimeout(() => {
            if(pClicks >= goal) { q.innerText = finalIns[lang] || finalIns['en']; vBtn.style.opacity="0.1"; }
            else { q.innerText = qs[Math.floor(Math.random()*qs.length)][lang]; }
            q.classList.add('show'); updateUI();
        }, 300);
    };

    const handleMove = (e) => {
        if(pClicks>=goal) return;
        const clX = e.clientX || (e.touches && e.touches[0].clientX);
        const clY = e.clientY || (e.touches && e.touches[0].clientY);
        document.querySelectorAll('.pupil').forEach(p => {
            const r = p.getBoundingClientRect(); const x = r.left + r.width/2; const y = r.top + r.height/2;
            const a = Math.atan2(clX - x, clY - y);
            p.style.transform = `rotate(${(a * (180/Math.PI) * -1) + 180}deg) translateY(-4px)`;
        });
    };
    document.addEventListener('mousemove', handleMove);
    document.addEventListener('touchmove', handleMove);

    function sL(l) { lang = l; document.querySelectorAll('.lang-tag').forEach(t=>t.classList.toggle('active', t.innerText.toLowerCase()===l)); updateUI(); uG(); }
    function copyCA() { navigator.clipboard.writeText(ca); const b = document.getElementById('ca-box'); b.innerText = "COPIED"; setTimeout(()=>b.innerText="CA: "+ca.substring(0,6)+'...', 1000); }
    
    updateUI(); uG(); setInterval(uG, 10000);
</script>
</body>
</html>
